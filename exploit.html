<!DOCTYPE html>
<html>
  <head>
    <title>Test d’accès iframe</title>
  </head>
  <body>
    <h1>Test de sécurité cross-origin</h1>

    <!-- Iframe cachée vers le site cible -->
    <iframe id="target" src="http://challenge01.root-me.org:58010/login" style="display: none;" onload="steal()"></iframe>

    <script>
      function steal() {
        const frame = document.getElementById("target");

        try {
          // Tentative d'accès au contenu DOM de l'iframe
          const doc = frame.contentWindow.document;
          alert("✅ Accès autorisé : " + doc.title);
        } catch (err) {
          // Erreur probable si origine différente
          alert("❌ Accès refusé : " + err);
        }
      }
    </script>
  </body>
</html>
