<!DOCTYPE html>
<html>
<head>
  <title>Test de sécurité cross-origin</title>
</head>
<body>
  <h1>Test iframe cross-origin</h1>

  <iframe id="target" 
          src="http://challenge01.root-me.org:58010/login" 
          width="600" height="400"
          onload="steal()"></iframe>

  <script>
    function steal() {
      const frame = document.getElementById("target");
      try {
        const doc = frame.contentWindow.document;
        alert("✅ Accès autorisé : " + doc.title);
      } catch (err) {
        alert("❌ Accès refusé : " + err);
        console.error("Erreur d'accès cross-origin :", err);
      }
    }
  </script>
</body>
</html>
